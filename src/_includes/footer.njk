<footer class="site-footer">
  <div class="container">
    <p>Â© {{ '' | date('yyyy') }} T &amp; C Enterprises Â· <a href="/">Home</a> Â· <a href="/about/">About</a> Â· <a href="/services/">Services</a> Â· <a href="/contact/">Contact</a></p>
    <p>â€œArtwork that just works â€” every time.â€</p>
  </div>
</footer>

<!-- Floating chat widget placeholder -->
<button id="chat-fab" aria-label="Chat">
  ğŸ’¬
</button>
<div id="chat-panel" hidden>
  <div class="chat-header">
    <strong>Chat with us</strong>
    <button id="chat-close" aria-label="Close">âœ–</button>
  </div>
  <div id="chat-log" class="chat-log"></div>
  <form id="chat-form">
    <input id="chat-input" type="text" placeholder="Ask a questionâ€¦" required />
    <button type="submit">Send</button>
  </form>
</div>
<script>
  const fab = document.getElementById('chat-fab');
  const panel = document.getElementById('chat-panel');
  const closeBtn = document.getElementById('chat-close');
  const form = document.getElementById('chat-form');
  const input = document.getElementById('chat-input');
  const log = document.getElementById('chat-log');

  fab?.addEventListener('click', () => panel.hidden = false);
  closeBtn?.addEventListener('click', () => panel.hidden = true);

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const text = input.value.trim();
    if (!text) return;
    log.insertAdjacentHTML('beforeend', `<div class="msg user">${text}</div>`);
    input.value = "";
    try {
      const res = await fetch('/api/chat', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ message: text })
      });
      const data = await res.json();
      log.insertAdjacentHTML('beforeend', `<div class="msg bot">${(data.reply || 'Agent unavailable right now.').replace(/</g,'&lt;')}</div>`);
    } catch (err) {
      log.insertAdjacentHTML('beforeend', `<div class="msg bot">Network error.</div>`);
    }
    log.scrollTop = log.scrollHeight;
  });
</script>
